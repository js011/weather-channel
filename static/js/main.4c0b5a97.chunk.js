(this["webpackJsonpweather-channel"]=this["webpackJsonpweather-channel"]||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(24),i=a.n(r),c=(a(35),a(12)),s=a(5),l=a(6),m=a(7),u=a(9),h=a(8),d=(a(36),"99fef1354fa6f839a4bc705007d6f6ff"),p=a(10),v=a(3),f=a(4),y=a(11),g=a(17);function E(){var e=Object(p.a)(["",""]);return E=function(){return e},e}function w(){var e=Object(p.a)(["\n  animation: 0.3s ",";\n"]);return w=function(){return e},e}function N(){var e=Object(p.a)(["",""]);return N=function(){return e},e}function b(){var e=Object(p.a)(["\n  animation: 1s ",";\n"]);return b=function(){return e},e}var W=y.a.div(b(),Object(y.b)(N(),g.flash)),L=y.a.div(w(),Object(y.b)(E(),g.fadeIn)),F=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).showFavouriteLocations=function(){e.setState({show:!e.state.show})},e.favouriteLocationsHidden=function(){e.setState({show:!1})},e.state={show:!1},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onChangeValues,o=t.searchWithCity,r=t.errorWeather,i=t.useMyLocationForWeather,c=t.searchWithFavouriteLocation,s=t.favouriteLocations,l=t.city;return n.a.createElement("div",{className:"top-block"},n.a.createElement("div",{className:"top-logo-block"},n.a.createElement("p",{className:"top-logo"},"Weather"," ",n.a.createElement("span",null,"Channel ",n.a.createElement(v.a,{icon:f.b}))),n.a.createElement("div",{className:"top-Favourite-block"},n.a.createElement(v.a,{className:"top-Favourite-block__icon",icon:f.g,onClick:this.showFavouriteLocations})," ",n.a.createElement("span",null,s.length),this.state.show&&n.a.createElement("div",{className:"favourite-locations"},s.map((function(t,a){return n.a.createElement(L,{key:t},n.a.createElement("p",{className:"favourite-locations__name",onClick:c.bind(e,t)},a+1,". ",t))}))))),n.a.createElement("div",{className:"top-settings-block",onClick:this.favouriteLocationsHidden},n.a.createElement("div",{className:"top-searchCity-block"},void 0!==r&&n.a.createElement(W,null,n.a.createElement("p",{className:"error-cityName",title:r.message},n.a.createElement(v.a,{icon:f.c}))),n.a.createElement("form",{onSubmit:o},n.a.createElement("input",{onChange:a,name:"city",placeholder:"Search city",className:"search-city",value:l}),n.a.createElement("label",{onClick:o},n.a.createElement(v.a,{icon:f.f})))),n.a.createElement("div",{className:"top-useMyLocation-block",onClick:i},n.a.createElement("p",null,n.a.createElement(v.a,{icon:f.d})," ",n.a.createElement("span",null,"Use my location"))),n.a.createElement("div",{className:"top-addLocations-block"},n.a.createElement("div",null),n.a.createElement("div",null,n.a.createElement("p",{className:"top-addLocations-title"},"Add location"),n.a.createElement("p",{className:"top-addLocations-subTitle"},"Did you know you can add favourite locations?")))))}}]),a}(n.a.Component),O=a(20),T=[{id:0,name:"Sun",fullName:"Sunday"},{id:1,name:"Mon",fullName:"Monday"},{id:2,name:"Tue",fullName:"Tuesday"},{id:3,name:"Wed",fullName:"Wednesday"},{id:4,name:"Thu",fullName:"Thursday"},{id:5,name:"Fri",fullName:"Friday"},{id:6,name:"Sat",fullName:"Saturday"}],D=a(19),S=a.n(D),k=a(28),C=a.n(k),j=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).convertToUtcTimeString=function(e){return new Date(1e3*e).toUTCString()},e.getTodayDay=function(){var t=e.props.date.formatted;return new Date(t.substr(0,4),t.substr(6,1)-1,t.substr(8,2)).getDay()},e.getWeatherForaSpecificDay=function(t,a){var o=e.props.weather.timezone_offset;return t.filter((function(t){return e.convertToUtcTimeString(t.dt+o).substr(5,2)===a}))},e.getOtherDays=function(){var t=T.filter((function(t){return t.id<e.getTodayDay()})),a=T.filter((function(t){return t.id>e.getTodayDay()}));return[].concat(Object(O.a)(a),Object(O.a)(t))},e.getVideoForFon=function(){var t=e.props.weather.hourly;return n.a.createElement("video",{className:"weather-video-fon",src:"weather-fon/".concat(t[0].weather[0].main,".mp4"),autoPlay:!0,loop:!0})},e.getWeatherForOtherDays=function(){return e.props.weather.daily.filter((function(e,t){return 0!==t}))},e.getClassNameForFavouriteLocations=function(){var t=e.props.favouriteLocations,a=e.props.values.cityName,o="passive";return t.length>0&&t.map((function(e){e===a&&(o="active")})),C()("favouriteLocations-block ".concat(o))},e.addOrRemoveCityOnFavoutireLocations=function(){var t=e.props,a=t.favouriteLocations,o=t.addFavouriteLocation,n=t.removeFavouriteLocation,r=e.props.values.cityName,i=!1;a.length>0?(a.map((function(e){e===r&&(i=!0)})),i?n():o()):o()},e.state={paramsSliderForWeatherToday:{slidesPerView:7,rebuildOnUpdate:!0},paramsSliderForWeatherOtherDays:{slidesPerView:5,rebuildOnUpdate:!0}},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.weather,a=t.hourly,o=t.timezone_offset,r=this.props.weather.current,i=r.dt,c=r.sunrise,s=r.sunset,l=this.props.values,m=l.cityName,u=l.country;return n.a.createElement("div",{className:"main-weather-block"},this.getVideoForFon(),n.a.createElement("div",{className:"shadow-block"},n.a.createElement("div",{className:"weather-today"},n.a.createElement("span",{className:this.getClassNameForFavouriteLocations(),onClick:this.addOrRemoveCityOnFavoutireLocations},n.a.createElement(v.a,{icon:f.a})),n.a.createElement("div",{className:"weather-today-topBlock"},n.a.createElement("div",null,n.a.createElement("p",{className:"weather-today-city"},m,", ",u),n.a.createElement("p",{className:"weather-today-time"},this.convertToUtcTimeString(i+o).substr(17,5))),n.a.createElement("div",null,n.a.createElement("p",{className:"weather-today-day"},T[this.getTodayDay()].fullName),n.a.createElement("p",{className:"weather-today-dayOnMonthAndMonth"},this.convertToUtcTimeString(i+o).substr(5,6)),n.a.createElement("div",{className:"weather-today-sunRiseAndSet"},n.a.createElement("p",{className:"sunrise"},n.a.createElement(v.a,{icon:f.h})," ",this.convertToUtcTimeString(c+o).substr(17,5)),n.a.createElement("p",{className:"sunset"},n.a.createElement(v.a,{icon:f.e})," ",this.convertToUtcTimeString(s+o).substr(17,5))))),n.a.createElement("div",{className:"weather-today-bottomBlock"},n.a.createElement("p",{className:"weather-today-desc"},a[0].weather[0].main,","," ",n.a.createElement("span",null,a[0].weather[0].description)),n.a.createElement("div",{className:"weather-today-items"},n.a.createElement("div",{className:"weather-today-prompt"},n.a.createElement("p",{title:"Probability of precipitation, %"},n.a.createElement(v.a,{icon:f.k})),n.a.createElement("p",{title:"Wind speed, meter/sec"},n.a.createElement(v.a,{icon:f.l})),n.a.createElement("p",{title:"Humidity, %"},n.a.createElement(v.a,{icon:f.j})),n.a.createElement("p",{title:"Atmospheric pressure, hPa"},n.a.createElement(v.a,{icon:f.i}))),n.a.createElement("div",{className:"weather-today-list"},n.a.createElement(S.a,this.state.paramsSliderForWeatherToday,this.getWeatherForaSpecificDay(a,this.convertToUtcTimeString(i+o).substr(5,2)).map((function(t){return n.a.createElement("div",{className:"weather-today-item",key:t.dt+o},n.a.createElement("p",null,e.convertToUtcTimeString(t.dt+o).substr(17,5)),n.a.createElement("img",{className:"weather-today-img",src:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png"),alt:t.weather[0].description}),n.a.createElement("p",{className:"weather-today-temp"},Math.floor(t.temp)," \xb0"),n.a.createElement("p",{className:"weather-today-pop"},t.pop,"%"),n.a.createElement("p",{className:"weather-today-wind"},t.wind_speed.toFixed(1)," m/s"),n.a.createElement("p",{className:"weather-today-humidity"},t.humidity,"%"),n.a.createElement("p",{className:"weather-today-wind"},t.pressure," hPa"))}))))))),n.a.createElement("div",{className:"weather-otherDays"},n.a.createElement("div",{className:"weather-otherDays-prompt"},n.a.createElement("p",{title:"Probability of precipitation, %"},n.a.createElement(v.a,{icon:f.k})),n.a.createElement("p",{title:"Wind speed, meter/sec"},n.a.createElement(v.a,{icon:f.l})),n.a.createElement("p",{title:"Humidity, %"},n.a.createElement(v.a,{icon:f.j})),n.a.createElement("p",{title:"Atmospheric pressure, hPa"},n.a.createElement(v.a,{icon:f.i}))),n.a.createElement(S.a,this.state.paramsSliderForWeatherOtherDays,this.getWeatherForOtherDays().map((function(t){return n.a.createElement("div",{key:t.dt,className:"weather-otherDays-item"},n.a.createElement("p",{className:"weather-otherDays-title"},e.convertToUtcTimeString(t.dt).substr(0,3),n.a.createElement("br",null),n.a.createElement("span",null,e.convertToUtcTimeString(t.dt).substr(5,6))),n.a.createElement("p",{className:"weather-otherDays-desc"},t.weather[0].main),n.a.createElement("img",{className:"weather-otherDays-img",src:"http://openweathermap.org/img/wn/".concat(t.weather[0].icon,"@2x.png"),alt:t.weather[0].description}),n.a.createElement("p",{className:"weather-otherDays-max-minTemp"},Math.floor(t.temp.max),"\xb0 / ",Math.floor(t.temp.min),"\xb0"),n.a.createElement("p",{className:"weather-otherDays-realFellTemp"},"Real Feel"),n.a.createElement("p",{className:"weather-otherDays-feelsLikeDayTemp"},Math.floor(t.feels_like.day)," \xb0"),n.a.createElement("p",{className:"weather-otherDays-pop weather-otherDays-promptBlocks"},t.pop,"%"),n.a.createElement("p",{className:"weather-otherDays-promptBlocks"},t.wind_speed.toFixed(1)," m/s"),n.a.createElement("p",{className:"weather-otherDays-promptBlocks"},t.humidity,"%"),n.a.createElement("p",{className:"weather-otherDays-promptBlocks border-bottom"},t.pressure," hPa"))}))))))}}]),a}(n.a.Component),M=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).getWeatherWithCoord=function(){return fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e.state.coord.lat,"&lon=").concat(e.state.coord.lon,"&appid=").concat(d,"&units=Metric")).then((function(e){return e.json()})).then((function(t){e.setState({weather:t})}))},e.getCityWithCoord=function(){var t=e.state.values.cnt,a=e.state.coord,o=a.lat,n=a.lon;return fetch("https://api.openweathermap.org/data/2.5/forecast?appid=".concat(d,"&lang=en&lat=").concat(o,"&lon=").concat(n,"&cnt=").concat(t,"&units=Metric")).then((function(e){return e.json()})).then((function(t){"200"===t.cod&&e.setState({values:Object(s.a)(Object(s.a)({},e.state.values),{},{cityName:t.city.name,country:t.city.country})})}))},e.getWeatherWithCityName=function(){var t=e.state.values,a=t.city,o=t.cnt;return fetch("https://api.openweathermap.org/data/2.5/forecast?appid=".concat(d,"&lang=en&q=").concat(a,"&cnt=").concat(o,"&units=Metric")).then((function(e){return e.json()})).then((function(t){"200"===t.cod?e.setState({coord:{lat:t.city.coord.lat,lon:t.city.coord.lon},errorWeather:void 0,values:Object(s.a)(Object(s.a)({},e.state.values),{},{cityName:t.city.name,country:t.city.country})}):e.setState({errorWeather:t})}))},e.getDateWithTimeZoneDB=function(){var t=e.state.coord,a=t.lat,o=t.lon;return fetch("http://api.timezonedb.com/v2.1/get-time-zone?key=".concat("UMWFU8OD2ZN5","&format=json&by=position&lat=").concat(a,"&lng=").concat(o)).then((function(e){return e.json()})).then((function(t){e.setState({date:t})}))},e.onChangeValues=function(t){e.setState({values:Object(s.a)(Object(s.a)({},e.state.values),{},Object(c.a)({},t.target.name,t.target.value))})},e.searchWithCity=function(t){t.preventDefault(),e.getWeatherWithCityName(),setTimeout((function(){e.getWeatherWithCoord(),e.getDateWithTimeZoneDB()}),500)},e.searchWithFavouriteLocation=function(t,a,o){e.setState({values:Object(s.a)(Object(s.a)({},e.state.values),{},{city:t})}),setTimeout((function(){e.getWeatherWithCityName()}),500),setTimeout((function(){e.getWeatherWithCoord(),e.getDateWithTimeZoneDB()}),1e3)},e.isLoading=function(e){return void 0!==e},e.geo_success=function(t){e.setState({coord:{lat:t.coords.latitude,lon:t.coords.longitude}})},e.geo_error=function(){alert("")},e.useMyLocationForWeather=function(){navigator.geolocation.getCurrentPosition(e.geo_success,e.geo_error,e.state.geo_options),setTimeout((function(){e.getWeatherWithCoord(),e.getCityWithCoord(),e.getDateWithTimeZoneDB()}),500)},e.addFavouriteLocation=function(){var t=e.state.favouriteLocations;t.push(e.state.values.cityName),localStorage.setItem("favouriteLocations",JSON.stringify(t)),e.setState({favouriteLocations:t})},e.removeFavouriteLocation=function(){e.setState({favouriteLocations:e.state.favouriteLocations.filter((function(t){return t!==e.state.values.cityName}))}),setTimeout((function(){localStorage.setItem("favouriteLocations",JSON.stringify(e.state.favouriteLocations))}),500)},e.state={coord:{lat:50.4333,lon:30.5167},values:{city:"Kyiv",cnt:1},geo_options:{enableHighAccuracy:!0,maximumAge:3e4,timeout:1e4},favouriteLocations:JSON.parse(localStorage.getItem("favouriteLocations"))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getWeatherWithCityName(),this.getDateWithTimeZoneDB(),this.getWeatherWithCoord()}},{key:"render",value:function(){return this.isLoading(this.state.weather)&&this.isLoading(this.state.date)&&this.isLoading(this.state.weather)?n.a.createElement(n.a.Fragment,null,n.a.createElement(F,{onChangeValues:this.onChangeValues,searchWithCity:this.searchWithCity,errorWeather:this.state.errorWeather,useMyLocationForWeather:this.useMyLocationForWeather,favouriteLocations:this.state.favouriteLocations,searchWithFavouriteLocation:this.searchWithFavouriteLocation,city:this.state.values.city}),n.a.createElement(j,{weather:this.state.weather,date:this.state.date,values:this.state.values,favouriteLocations:this.state.favouriteLocations,addFavouriteLocation:this.addFavouriteLocation,removeFavouriteLocation:this.removeFavouriteLocation})):n.a.createElement("div",{className:"center-block"},n.a.createElement("p",{className:"load-logo"},"Weather"," ",n.a.createElement("span",null,"Channel ",n.a.createElement(v.a,{icon:f.b}))))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(29),_=a.n(U);a(121);_.a.load({google:{families:["Roboto","Open Sans"]}}),i.a.render(n.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},30:function(e,t,a){e.exports=a(123)},35:function(e,t,a){},36:function(e,t,a){}},[[30,1,2]]]);
//# sourceMappingURL=main.4c0b5a97.chunk.js.map